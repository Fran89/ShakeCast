
# Configuration file for ShakeCast

# Connection info used to connect to the DBI data source used by the
# server-side scripts.
<DBConnection>
    ConnectString	dbi:mysql:sc
    Username		sc
    Password		sc
    Type		mysql
    RetryCount          10
    RetryInterval       20
</DBConnection>

# Specify the User and Group IDs for running all daemons
# May be numeric or a user name (for UserID) or group name (for GroupID)
UserID			www-data
GroupID			www-data

# Root directory of the ShakeCast server application.
RootDir			/home/shake/ShakeCast/sc

# Top-level product file directory
# Directory naming convention is:
#	<root>/<shakemap id>-<shakemap version>/<product file>
# [subject to change]
#DataRoot	/home/shake/ShakeCast/sc/data
DataRoot	/home/shake/ShakeCast/sc/data

# Log file directory.  The various processors and scripts will create
# their log files here.
LogDir		/home/shake/ShakeCast/sc/logs

# Log file name.  For allowed formats see Logger.pm.  Note that some
# processors are always running; they will continue to write to the log file
# they open at startup time.  Specifying a date pattern for the log file
# name does not behave as expected.
LogFile		sc.log

# Log level 0=least, 9=most
# More specific definition of levels (preliminary)
#	0	errors and warnings only
#	2	
LogLevel	4

LocalServerId   1

<Logrotate>
    LOGSTATDIR   /home/shake/ShakeCast/sc/docs/images
    rotate-time   1 week
    compress   Yes
    keep-files   5
    logfile   /home/shake/ShakeCast/sc/logs/sc.log
    logfile   /home/shake/ShakeCast/sc/logs/sc_access.log
    logfile   /home/shake/ShakeCast/sc/logs/sc_error.log
    max_size   100 M
    status-file   /home/shake/ShakeCast/sc/logs/logrotate.status
</Logrotate>

<Destination>
    Hostname    localhost
    Password    scadmin
</Destination>

# Dispatcher configuration
<Dispatcher>
    MinWorkers	2
    MaxWorkers	20
    WorkerPort	58163
    RequestPort	58164
    WorkerTimeout 3600
    
    AUTOSTART	1
    # the LOG & LOGGING setting only applies to messages logged out of
    # GenericDaemon; other messages from dispd itself are controlled by the
    # settings of LogLevel and LogFile in the system-wide configuration above
    LOG		/home/shake/ShakeCast/sc/logs/sc.log
    LOGGING	1
    PORT	53456
    PROMPT	dispd>
    POLL	1
    SPOLL	1
    SERVICE_NAME  dispd
    SERVICE_TITLE ShakeCast Dispatcher
</Dispatcher>

# Polling Daemon configuration
<Poller>
    AUTOSTART	1
    # the LOG & LOGGING setting only applies to messages logged out of
    # GenericDaemon; other messages from polld itself are controlled by the
    # settings of LogLevel and LogFile in the system-wide configuration above
    LOG		/home/shake/ShakeCast/sc/logs/sc.log
    LOGGING	1
    MSGLEVEL	2
    POLL	120
    PORT	53457
    PROMPT	polld>
    SERVICE_NAME polld
    SERVICE_TITLE ShakeCast Polling Daemon
    SPOLL	10
</Poller>

TemplateDir	/home/shake/ShakeCast/sc/templates		# XXX

<Notification>
    From		shake@gldrd1.cr.usgs.gov
    EnvelopeFrom	shake@gldrd1.cr.usgs.gov
    #SmtpServer		mail.gldrd1.usgs.gov
    SmtpServer		gldrd1.cr.usgs.gov
    DefaultEmailTemplate	default.txt
    DefaultScriptTemplate	default.pl
</Notification>

<NotifyQueue>
    LogLevel            2 #Override global
    ServiceTitle        ShakeCast Notification Generator
    Spoll            	10
    ScanPeriod		60
</NotifyQueue>

<Notify>
    LogLevel            2 #Override global
    ServiceTitle        ShakeCast Notification Distributor
    Spoll            	10
    ScanPeriod		60
</Notify>

<rss>
    AUTOSTART   1
    PROMPT   rssd>
    TIME_WINDOW   7
    MSGLEVEL   2
    SERVICE_NAME   rssd
    POLL   60
    SPOLL   10
    LOG   /home/shake/ShakeCast/sc/logs/sc.log
    LOGGING   1
    SERVICE_TITLE   ShakeCast RSS Daemon
    REGION   ALL
    PORT   53458
</rss>

<Watcher>
    AUTOSTART   1
    PROMPT   watcherd>
    MSGLEVEL   2
    SERVICE_NAME   watcherd
    POLL   120
    SPOLL   10
    LOG   /home/shake/ShakeCast/sc/logs/sc.log
    LOGGING   2
    SERVICE_TITLE   ShakeCast Watcher Daemon
    PORT   53459
</Watcher>

<Metric>
    AUTOSTART   1
    PROMPT   metricd>
    MSGLEVEL   2
    SERVICE_NAME   metricd
    POLL   60
    SPOLL   10
    MODEL   Arias
    LOG   /home/shake/ShakeCast/sc/logs/sc.log
    SERVICE_TITLE   ShakeCast Metrics Daemon
    LOGGING   1
    PORT   53459
</Metric>

<Admin>
    HtPasswordPath      /usr/local/bin/htpasswd
    ServerPwdFile       /home/shake/ShakeCast/sc/userdbs/sc-servers
    UserPwdFile         /home/shake/ShakeCast/sc/userdbs/sc-users
</Admin>

board_timezone   1
<ROVER>
    Server   10.0.2.15:8000
    Screener   admin
    PW   rover
</ROVER>
<Cleanup>
    DATADIR   /home/shake/ProductClient/data/indexer_storage
    DATADIR   /home/shake/ProductClient/data/receiver_storage
    DATADIR   /home/shake/ProductClient/data/shakemap_listener_storage
    keep_time   90
</Cleanup>

# Threshold and for ShakeCast updates
Threshold   20

# Distrance and shaking threshold and for generating predictive shaking estimates
MODEL_SHAKING_THRESHOLD   1.0
DISTANCE_CUTOFF   400

# Magnitude threshold for ShakeCast processing
MAG_CUTOFF   3

# Redundant check of event
REDUNDANT_CHECK   0

# Perl bin directory
perlbin   /usr/bin/perl

# gnuplot bin directory
gnuplot   /usr/bin/gnuplot

# wkhtmltopdf bin directory
wkhtmltopdf   /home/shake/ShakeCast/wkhtmltopdf/wkhtmltoimage-i386


